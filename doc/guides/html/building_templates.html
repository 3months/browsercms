<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>BrowserCMS Designer Guide</title>
    <link rel="stylesheet" type="text/css" href="files/stylesheets/syntax.css" />
    <script type="text/javascript" src="files/javascripts/code_highlighter.js"></script>
    <script type="text/javascript" src="files/javascripts/highlighters.js"></script>
    <style type="text/css">
      body {
        background: #FFFFFF url(images/bg.png) repeat-x scroll 0 0;
        font-family: "Trebuchet MS", Helvetica, Verdana, Arial, sans-serif;
        margin: 0;
        padding: 0;
      }
  
      #page {
        margin: 0 auto;
        text-align: left;
        width: 1000px;
      }
  
      #header {
        height: 110px;
      }
  
      div.top_cap {
        background: transparent url(images/top_cap.png) no-repeat scroll 0 0;
        height: 10px;
      }    
  
      #contentwrap {
        background: transparent url(images/dot.png) repeat scroll 0 0;
        float: left;
        width: 1000px;
      }
      
      div.bottom_cap {
        background: transparent url(images/bottom_cap.png) no-repeat scroll 0 0;
        height: 9px;
      }

      div.top_cap_content {
        background: transparent url(images/top_cap_content.png) no-repeat scroll 0 0;
        height: 5px;
      }
  
      #content {
        background-color: #FFFFFF;
        margin: 0 5px;
        padding: 0 10px;
      }
  
      div.title {
        padding: 20px;
      }
  
      div.title h1 {
        border-bottom: 3px solid #505358;
        color: #FFFFFF;
        font-size: 24pt;
        font-weight: normal;
        line-height: 1;
        margin: 0 0 10px;
        padding-bottom: 10px;
      }
      
      td.sidebar {
        font-size: 8pt;
        width: 165px;
        padding: 5px;
      }
      
      td.sidebar ol {
        margin-left: 20px;
        padding: 0;
        line-height: 1.5;
      }
      
      td.sidebar ol li {
        margin: 0;
        padding: 0;
      }
      
      td.sidebar ol li ul {
        list-style-type: none;
        padding-left: 10px;
      }
      
      td.guides {
        font-size: 10pt;
        width: 800px;
        padding: 10px;
      }
      
      .code_container {
        padding: 10px;
        background: #eee;
        border: 1px solid #ccc;
        overflow: auto;
        width: 760px;
      }
      
      pre, code {
        overflow: auto;
        white-space:pre;        
      }
      .note {
	-moz-background-clip:border;
	-moz-background-inline-policy:continuous;
	-moz-background-origin:padding;
	background:#FFF9D8 url(../images/tab_note.gif) no-repeat scroll left top;
	border:medium none;
	margin:0.25em 0 1.5em;
	padding:1em 1em 0.25em 48px;
	}
    </style>
  </head>
  <body>
    <div id="page">
      <div id="header">
        <a href="index.html"><img style="border:0px" src="images/browsercms_logo.png" alt="BrowserCMS"/></a>
      </div>
      <div id="main">
        <div class="top_cap"></div>
        <div id="contentwrap">
          <div class="title">
            <h1>BrowserCMS Designer Guide</h1>
          </div>
          <div class="top_cap_content"></div>
          <div id="content">
            <table width="100%" cellpadding="0" cellspacing="0" border="0">
              <tr>                
                <td class="sidebar" valign="top">
                        <div id="subCol">
        <h3 class="chapter"><img src="images/chapters_icon.gif" alt="" />Chapters</h3>
        <ol class="chapters">
<li><a href="#introduction">Introduction</a><ul><li><a href="#typical-design-process">Typical Design Process</a></li><li><a href="#template-design-considerations">Template Design Considerations</a></li></ul></li><li><a href="#creating-a-page-template">Creating a Page Template</a><ul><li><a href="#understanding-containers">Understanding Containers</a></li><li><a href="#adding-a-sidebar-container">Adding A Sidebar Container</a></li></ul></li><li><a href="#tags-quick-reference">Tags Quick Reference</a><ul><li><a href="#required-tags">Required Tags</a></li></ul></li><li><a href="#menus-and-breadcrumbs">Menus and Breadcrumbs</a><ul></ul></li></ol></div>
                </td>
                <td class="guides">
                  <h2>BrowserCMS Designer Guide</h2>
<p>This guide covers how to set up templates for BrowserCMS. After reading this guide, you should understand how to:</p>
<ul>
	<li>How to create page templates</li>
	<li>How to take advantage of dynamic menus</li>
	<li>How to reuse common bits of html with page partials</li>
	<li>How to use helpers to add dynamic content to templates and partials</li>
	<li>How to use the <span class="caps">CMS</span>-specific form builder extensions</li>
</ul>
                  <h3 id="introduction">1 Introduction</h3>
<p>One of the primary goals of implementing a content management system is to separate Design from Content. This allows designers to provide an attractive design that users can easily apply. A <span class="caps">CMS</span> can be thought of as a &#8216;Web Page&#8217; factory, where designers can create the template (i.e. the molds) that users without design knowledge can use to stamp out new pages.</p>
<p>BrowserCMS supports this concept by the use of page templates. Each page within the site has a single page template that governs it&#8217;s layout. Templates are essentially html pages with the editable areas specified. A template can be anything from a basic two column subpage to homepage design with a half dozen separate editable areas. BrowserCMS supports an &#8216;in-context&#8217; page editor, that allows users to see which areas of the page are editable.</p>
<h4 id="typical-design-process">1.1 Typical Design Process</h4>
<p>When you are developing a site with BrowserCMS, there are a lot of ways to organize and design the site. One of the goals of the project is to support highly graphical designs that pass through multiple team members hands. As such, the template creation process is optimized to mimic the steps that would work for any web development project, without constraining the design to fit the tool.</p>
<p>Here is an example of a web design process to create templates for BrowserCMS.</p>
<ol>
	<li>A designer creates a Photoshop (<span class="caps">PSD</span> or <span class="caps">JPG</span>) which represents the desire final look of a page.</li>
	<li>A developer converts the <span class="caps">PSD</span> into a static <span class="caps">HTML</span> file which implements that design.</li>
	<li>The developer can take this html file, add it to the <span class="caps">CMS</span> as a page template just by renaming it from .htm to .html.erb</li>
	<li>The developer can add a few helper methods to the template replacing the &#8216;static&#8217; text to make it editable through the <span class="caps">CMS</span> interface.</li>
</ol>
<p>There are few additional considerations we will get into, but this basic process allows developers to work in a medium they are well trained in (<span class="caps">HTML</span> production) with minimal training on BrowserCMS itself. For the purposes of this document, assume there are three separate and distinct roles around creating a <span class="caps">CMS</span> site.</p>
<ol>
	<li>Designer &#8211; A person in charge of defining the overall look and feel of the pages within a site. Produces a <span class="caps">PSD</span>.</li>
	<li>Developer &#8211; A person in charge of converting the ideal look (<span class="caps">PSD</span>) into an <span class="caps">HTML</span> page and ultimately a <span class="caps">CMS</span> template.</li>
	<li>Programmer &#8211; A person in charge of coding content types (blocks) and dynamic behavior (portlets).</li>
</ol>
<h4 id="template-design-considerations">1.2 Template Design Considerations</h4>
<p>There are some considerations that designers/developers should take into account if they want to get the maximum benefit from working w/ BrowserCMS. Here&#8217;s a quick list:</p>
<p>1. BrowserCMS can render menus (one or more levels deep) automatically from the site architecture. Developers should understand how menu code is generated when styling them, which happens in a <a href="http://www.csszengarden.com"><span class="caps">CSS</span> Zen Garden</a> style.
2. The Site Map is how pages and sections are organized. Developers should understand how this will affect auto-generated menus.
3. In addition to static content, the look of some areas of pages will be rendered dynamically by portlets and blocks. Developers may need to work with programmers to determine whether view code will be dynamically generated via portlets or statically placed by users.</p>
<h3 id="creating-a-page-template">2 Creating a Page Template</h3>
<p>There are two ways to create a template, as a file within the project (much like how Rails layouts work) or as content in the database. Let&#8217;s start with creating a file based template. Assuming we are starting from a new <em>blank</em> BrowserCMS project, lets create a template that will represent our subpages. Run the following from the command line:</p>
<div class="code_container"><code class="html">$ script/generate template subpage</code></div>
<p>This generates a file called <tt>app/views/layouts/templates/subpage.html.erb</tt>. For experience Rails developers, you will note that within the traditional <tt>layouts</tt> directory we have create a subdirectory called <tt>templates</tt>. All files placed within this directory are available as page templates with the UI. Open up this template file and it should look like this:</p>
<div class="code_container"><code class="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; 
  &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=utf-8&quot; /&gt;
    &lt;title&gt;&lt;%= page_title %&gt;&lt;/title&gt;
    &lt;%= yield :html_head %&gt;
  &lt;/head&gt;
  &lt;body style=&quot;margin: 0; padding: 0; text-align: center;&quot;&gt;
    &lt;%= cms_toolbar %&gt;
    &lt;div id=&quot;wrapper&quot; style=&quot;width: 700px; margin: 0 auto; text-align: left; padding: 30px&quot;&gt;
      Breadcrumbs: &lt;%= render_breadcrumbs %&gt;
      Main Menu: &lt;%= render_menu %&gt;
      &lt;h1&gt;&lt;%= page_title %&gt;&lt;/h1&gt;
      &lt;%= container :main %&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></div>
<p>This is a bare bones <span class="caps">XHTML</span> template with one editable area (i.e. One Column). It has no <span class="caps">CSS</span> stylesheets or javascript. It&#8217;s about the simplest possible template we can have to create a renderable page in BrowserCMS.</p>
<h4 id="understanding-containers">2.1 Understanding Containers</h4>
<p>There are a bits of ruby code (helpers) that our basic template has, but let&#8217;s focus on the <tt>container</tt> helper. Open up the <span class="caps">CMS</span> UI and go to <tt>/cms/sitemap</tt> and Add a New Page. Name it &#8216;About Us&#8217;, and select &#8216;Subpage&#8217; from the &#8216;Template&#8217; dropdown to use this new template. Click Save. You should see a mostly white page. Click the &#8216;Turn On&#8217; button in the upper right to enable the editor, and you should see a single grey box. This box is the <tt>container</tt> we defined in our template. Users can insert new or existing content into pages, and the containers determine where they go. Add some Text content to the page in this container.</p>
<div class='note'><p>Container are placeholders for content. When you have two pages that use the same template, they do not share the content. Putting some Text into the <tt>:main</tt> container of Page A doesn&#8217;t mean it will also appear on Page B just because that page also has a <tt>:main</tt> container.</p></div>
<h4 id="adding-a-sidebar-container">2.2 Adding A Sidebar Container</h4>
<p>Let&#8217;s alter our template to add a second column (i.e. Sidebar). Modify the <tt>subpage.html</tt> to look like the following:</p>
<div class="code_container"><code class="html">&lt;head&gt;
  &lt;title&gt;&lt;%= page_title %&gt; | Our Fancy Site&lt;/title&gt;
  &lt;style&gt;
      body, html { margin: 0; padding: 0; text-align: center; }
      #wrapper { width: 700px; margin: 0 auto; text-align: left; padding: 30px }
      #main { float: left; width: 500px; }
      #sidebar { float: right; padding: 0 30px 0 0; width: 150px;}
  &lt;/style&gt;
  &lt;%= yield :html_head %&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;%= cms_toolbar %&gt;
&lt;div id=&quot;wrapper&quot;&gt;
  &lt;div id=&quot;header&quot;&gt;
    Breadcrumbs: &lt;%= render_breadcrumbs %&gt;
    Main Menu: &lt;%= render_menu %&gt;
    &lt;h1&gt;&lt;%= page_title %&gt;&lt;/h1&gt;
  &lt;/div&gt;
  &lt;div id=&quot;main&quot;&gt;&lt;%= container :main %&gt;&lt;/div&gt;
  &lt;div id=&quot;sidebar&quot;&gt;&lt;%= container :sidebar %&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;</code></div>
<p>We have added several <tt>div</tt> elements to the template to clearly define a header, main and sidebar areas of our page. We have also cleaned up the <span class="caps">CSS</span> placed in the <tt>head</tt> element of the page. This <span class="caps">CSS</span> could also be moved to an external stylesheet as well. Now refresh the page and you should see an additional column on the right with a new <tt>:sidebar</tt> container being rendered. The content placed in the <tt>:main</tt> container will still there, though moved around based on the <span class="caps">CSS</span> rules of the template.</p>
<p>Having seen the sample templates, it should be possible to construct <span class="caps">HTML</span> templates using typical <span class="caps">HTML</span> and <span class="caps">CSS</span>, place containers in them where content should appear and get a reasonable looking set of templates.</p>
<h3 id="tags-quick-reference">3 Tags Quick Reference</h3>
<p>This section covers a reference for all the tags (aka Helper Methods) that can be used in Page Templates to render various elements. Here is a quick list of the available tags, their purpose and whether they are required or not.</p>
<p>._ Name |<em>. Purpose | Required? |
| <tt>container</tt> | A named area that allows users to add/edit content | Yes |
| <tt>cms</em>toolbar</tt></notextile> | Renders the <span class="caps">CMS</span> toolbar controller required for editing and navigation. Should be very first element in <tt>body</tt> | Yes |
| <tt>yield :html_head | This allows the CMS to insert javascript and other information into the page. Should be last element in </tt>head+ | Yes | 
| <tt>page_title</tt> | Inserts the &#8216;Name&#8217; of the page (or &#8216;Title&#8217; if it exists) | No |
| <tt>render_breadcrumbs</tt> | Generates breadcrumbs based on the current page and its location in the sitemap | No |
| <tt>render_menu</tt> | Generates a menu based on the current page and its location in the sitemap | No |
| <tt>render_portlet</tt> | Renders a specific portlet by name | No |
| <tt>render_connectable</tt> | Renders a specific content block | No |</p>
<p>In addition, since Page Templates are Rails layouts, you can make use of any of the Asset Tags&quot;:http://guides.rubyonrails.org/layouts_and_rendering.html#structuring-layouts like <tt>stylesheet_link_tag</tt> or <tt>image_tag</tt>.</p>
<h4 id="required-tags">3.1 Required Tags</h4>
<p>While most of the tags are optional, there are several tags which must be included or page template just won&#8217;t work correctly. Here&#8217;s the minimum necessary tags required.</p>
<p>1. <tt>yield :html_head</tt> &#8211; Leaving this out will cause problems with in page editing.
2. <tt>cms_toolbar</tt> &#8211; Leaving this out will provide editing and navigation to other <span class="caps">CMS</span> pages.
3. <tt>container</tt> &#8211; Having at least one (typically called <tt>:main</tt>) is required to allow content to be added to pages.</p>
<h3 id="menus-and-breadcrumbs">4 Menus and Breadcrumbs</h3>
<p>BrowserCMS provides an <span class="caps">API</span> to allow menus and breadcrumbs to be dynamically generated based on the sitemap. The advantage of this is menus can automatically include new pages as they are added to the site, and can detect which section of the</p>
<div class="code_container"><code class="ruby">render_menu</code></div>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <br clear="all"/>
        <div class="bottom_cap"></div>
      </div>
    </div>
  </body>
</html>

