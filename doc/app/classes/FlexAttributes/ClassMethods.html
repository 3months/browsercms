<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: FlexAttributes::ClassMethods</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">FlexAttributes::ClassMethods</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/flex_attributes_rb.html">
                lib/flex_attributes.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Flex attributes allow for the common but questionable database design of
storing attributes in a thin key/value table related to some model.
</p>
<h1>Rational</h1>
<p>
A good example of this is where you need to store lots (possible hundreds)
of optional attributes on an object. My typical reference example is when
you have a <a href="../User.html">User</a> object. You want to store the
user&#8216;s preferences between sessions. Every search, sort, etc in your
application you want to keep track of so when the user visits that section
of the application again you can simply restore the display to how it was.
</p>
<p>
So your controller might have:
</p>
<pre>
  Project.find :all, :conditions =&gt; current_user.project_search,
    :order =&gt; current_user.project_order
</pre>
<p>
But there could be hundreds of these little attributes that you really
don&#8216;t want to store directly on the user object. It would make your
table have too many columns so it would be too much of a pain to deal with.
Also there might be performance problems. So instead you might do something
like this:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    has_many :preferences
  end

  class Preferences &lt; ActiveRecord::Base
    belongs_to :user
  end
</pre>
<p>
Now simply give the Preference model a &quot;name&quot; and
&quot;value&quot; column and you are set.&#8230;. except this is now too
complicated. To retrieve a attribute you will need to do something like:
</p>
<pre>
  Project.find :all,
    :conditions =&gt; current_user.preferences.find_by_name('project_search').value,
    :order =&gt; current_user.preferences.find_by_name('project_order').value
</pre>
<p>
Sure you could fix this through a few methods on your model. But what about
saving?
</p>
<pre>
  current_user.preferences.create :name =&gt; 'project_search',
    :value =&gt; &quot;lastname LIKE 'jones%'&quot;
  current_user.preferences.create :name =&gt; 'project_order',
    :value =&gt; &quot;name&quot;
</pre>
<p>
Again this seems to much. Again we could add some methods to our model to
make this simpler but do we want to do this on every model. NO! So instead
we use this plugin which does everything for us.
</p>
<h1>Capabilities</h1>
<p>
The <a href="../FlexAttributes.html">FlexAttributes</a> plugin is capable
of modeling this problem in a intuitive way. Instead of having to deal with
a related model you treat all attributes (both on the model and related) as
if they are all on the model. The plugin will try to save all attributes to
the model (normal <a href="../ActiveRecord.html">ActiveRecord</a>
behaviour) but if there is no column for an attribute it will try to save
it to a related model whose purpose is to store these many sparsly
populated attributes.
</p>
<p>
The main design goals are:
</p>
<ul>
<li>Have the flex attributes feel like normal attributes. Simple gets and sets
will add and remove records from the related model.

</li>
<li>Allow for more than one related model. So for example on my <a
href="../User.html">User</a> model I might have some flex attributes going
into a contact_info table while others are going in a user_preferences
table.

</li>
<li>Allow a model to determine what a valid flex attribute is for a given
related model so our model still can generate a NoMethodError.

</li>
<li>Have flex attributes work with ActsAsVersioned. We want the versioned
models to be able to be related with the correct attributes. If a flex
attribute changes it should generate a new version of the model and the old
version should still have the old value for the flex attribute.

</li>
</ul>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000201">has_flex_attributes</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000201" class="method-detail">
        <a name="M000201"></a>

        <div class="method-heading">
          <a href="#M000201" class="method-signature">
          <span class="method-name">has_flex_attributes</span><span class="method-args">(options={})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Will make the current class have flex attributes.
</p>
<pre>
  class User &lt; ActiveRecord::Base
    has_flex_attributes
  end
  eric = User.find_by_login 'eric'
  puts &quot;My AOL instant message name is: #{eric.aim}&quot;
  eric.phone = '555-123-4567'
  eric.save
</pre>
<p>
The above example should work even though &quot;aim&quot; and
&quot;phone&quot; are not attributes on the <a href="../User.html">User</a>
model.
</p>
<p>
The following options are available on for <a
href="ClassMethods.html#M000201">has_flex_attributes</a> to modify the
behavior. Reasonable defaults are provided:
</p>
<table>
<tr><td valign="top">class_name:</td><td>The class for the related model. This defaults to the model name prepended
to &quot;Attribute&quot;. So for a &quot;<a
href="../User.html">User</a>&quot; model the class name would be
&quot;UserAttribute&quot;. The class can actually exist (in that case the
model file will be loaded through Rails dependency system) or if it does
not exist a basic model will be dynamically defined for you. This allows
you to implement custom methods on the related class by simply defining the
class manually.

</td></tr>
<tr><td valign="top">table_name:</td><td>The table for the related model. This defaults to the attribute
model&#8216;s table name.

</td></tr>
<tr><td valign="top">relationship_name:</td><td>This is the name of the actual has_many relationship. Most of the type this
relationship will only be used indirectly but it is there if the user wants
more raw access. This defaults to the class name underscored then
pluralized finally turned into a symbol.

</td></tr>
<tr><td valign="top">foreign_key:</td><td>The key in the attribute table to relate back to the model. This defaults
to the model name underscored prepended to &quot;_id&quot;

</td></tr>
<tr><td valign="top">name_field:</td><td>The field which stores the name of the attribute in the related object

</td></tr>
<tr><td valign="top">value_field:</td><td>The field that stores the value in the related object

</td></tr>
<tr><td valign="top">fields:</td><td>A list of fields that are valid flex attributes. By default this is
&quot;nil&quot; which means that all field are valid. Use this option if
you want some fields to go to one flex attribute model while other fields
will go to another. As an alternative you can override the flex_attributes
method which will return a list of all valid flex attributes. This is
useful if you want to read the list of attributes from another source to
keep your code DRY. This method is given a single argument which is the
class for the related model. The following provide an example:

</td></tr>
</table>
<pre>
 class User &lt; ActiveRecord::Base
   has_flex_attributes :class_name =&gt; 'UserContactInfo'
   has_flex_attributes :class_name =&gt; 'Preferences'

   def flex_attributes(model)
     case model
       when UserContactInfo
         %w(email phone aim yahoo msn)
       when Preference
         %w(project_search project_order user_search user_order)
       else Array.new
     end
   end
 end

 eric = User.find_by_login 'eric'
 eric.email = 'eric@example.com' # Will save to UserContactInfo model
 eric.project_order = 'name'     # Will save to Preference
 eric.save # Carries out save so now values are in database
</pre>
<p>
Note the else clause in our case statement. Since an empty array is
returned for all other models (perhaps added later) then we can be certain
that only the above flex attributes are allowed.
</p>
<p>
If both a :fields option and flex_attributes method is defined the :fields
option take precidence. This allows you to easily define the field list
inline for one model while implementing flex_attributes for another model
and not having flex_attributes need to determine what model it is answering
for. In both cases the list of flex attributes can be a list of string or
symbols
</p>
<p>
A final alternative to :fields and flex_attributes is the
is_flex_attribute? method. This method is given two arguments. The first is
the attribute being retrieved/saved the second is the Model we are testing
for. If you override this method then the flex_attributes method or the
:fields option will have no affect. Use of this method is ideal when you
want to retrict the attributes but do so in a algorithmic way. The
following is an example:
</p>
<pre>
  class User &lt; ActiveRecord::Base
    has_flex_attributes :class_name =&gt; 'UserContactInfo'
    has_flex_attributes :class_name =&gt; 'Preferences'

    def is_flex_attribute?(attr, model)
      case attr.to_s
        when /^contact_/ then true
        when /^preference_/ then true
        else
          false
      end
    end
  end

  eric = User.find_by_login 'eric'
  eric.contact_phone = '555-123-4567'
  eric.contact_email = 'eric@example.com'
  eric.preference_project_order = 'name'
  eric.some_attribute = 'blah'  # If some_attribute is not defined on
                                # the model then method not found is thrown
</pre>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000201-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000201-source">
<pre>
     <span class="ruby-comment cmt"># File lib/flex_attributes.rb, line 194</span>
194:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">has_flex_attributes</span>(<span class="ruby-identifier">options</span>={})
195: 
196:       <span class="ruby-comment cmt"># Provide default options</span>
197:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:class_name</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class_name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'Attribute'</span>
198:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:table_name</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:class_name</span>].<span class="ruby-identifier">tableize</span>
199:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:relationship_name</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:class_name</span>].<span class="ruby-identifier">tableize</span>.<span class="ruby-identifier">to_sym</span>
200:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:foreign_key</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class_name</span>.<span class="ruby-identifier">foreign_key</span>
201:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:base_foreign_key</span>] <span class="ruby-operator">||=</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">underscore</span>.<span class="ruby-identifier">foreign_key</span>
202:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:name_field</span>] <span class="ruby-operator">||=</span> <span class="ruby-value str">'name'</span>
203:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:value_field</span>] <span class="ruby-operator">||=</span> <span class="ruby-value str">'value'</span>
204:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:fields</span>].<span class="ruby-identifier">collect!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">to_s</span>} <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:fields</span>].<span class="ruby-identifier">nil?</span>
205:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:versioned</span>] = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:versioned</span>) <span class="ruby-operator">?</span>
206:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:versioned</span>] <span class="ruby-operator">:</span> <span class="ruby-keyword kw">false</span>
207: 
208:       <span class="ruby-comment cmt"># Init option storage if necessary</span>
209:       <span class="ruby-identifier">cattr_accessor</span> <span class="ruby-identifier">:flex_options</span>
210:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">flex_options</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
211: 
212:       <span class="ruby-comment cmt"># Return if already processed.</span>
213:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">flex_options</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:class_name</span>]
214: 
215:       <span class="ruby-comment cmt"># Attempt to load related class. If not create it</span>
216:       <span class="ruby-keyword kw">begin</span>
217:         <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:class_name</span>].<span class="ruby-identifier">constantize</span>
218:       <span class="ruby-keyword kw">rescue</span>
219:         <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:class_name</span>],
220:           <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>)).<span class="ruby-identifier">class_eval</span> <span class="ruby-keyword kw">do</span>
221:           <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">reloadable?</span> <span class="ruby-comment cmt">#:nodoc:</span>
222:             <span class="ruby-keyword kw">false</span>
223:           <span class="ruby-keyword kw">end</span>
224:         <span class="ruby-keyword kw">end</span>
225:       <span class="ruby-keyword kw">end</span>
226: 
227:       <span class="ruby-comment cmt"># Store options</span>
228:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">flex_options</span>[<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:class_name</span>]] = <span class="ruby-identifier">options</span>
229: 
230:       <span class="ruby-comment cmt"># Mix in instance methods</span>
231:       <span class="ruby-identifier">send</span> <span class="ruby-identifier">:include</span>, <span class="ruby-constant">FlexAttributes</span><span class="ruby-operator">::</span><span class="ruby-constant">InstanceMethods</span>
232: 
233:       <span class="ruby-comment cmt"># Modify attribute class</span>
234:       <span class="ruby-identifier">attribute_class</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:class_name</span>].<span class="ruby-identifier">constantize</span>
235:       <span class="ruby-identifier">base_class</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">underscore</span>.<span class="ruby-identifier">to_sym</span>
236:       <span class="ruby-identifier">attribute_class</span>.<span class="ruby-identifier">class_eval</span> <span class="ruby-keyword kw">do</span>
237:         <span class="ruby-identifier">belongs_to</span> <span class="ruby-identifier">base_class</span>, <span class="ruby-identifier">:foreign_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:base_foreign_key</span>]
238:         <span class="ruby-identifier">alias_method</span> <span class="ruby-identifier">:base</span>, <span class="ruby-identifier">base_class</span> <span class="ruby-comment cmt"># For generic access</span>
239:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:versioned</span>]
240:           <span class="ruby-keyword kw">begin</span>
241:             <span class="ruby-identifier">version_column</span> = <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'lock_version'</span>) <span class="ruby-operator">?</span>
242:               <span class="ruby-value str">'lock_version'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'version'</span>
243:             <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version</span> <span class="ruby-comment cmt"># :nodoc:</span>
244:               <span class="ruby-identifier">lock_version</span>
245:             <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">version_column</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'lock_version'</span>
246:           <span class="ruby-keyword kw">rescue</span>
247:             <span class="ruby-identifier">version_column</span> = <span class="ruby-value str">'version'</span>
248:           <span class="ruby-keyword kw">end</span>
249:           <span class="ruby-identifier">acts_as_versioned</span> <span class="ruby-identifier">:version_column</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">version_column</span>
250:           <span class="ruby-identifier">acts_as_versioned_association</span> <span class="ruby-identifier">base_class</span>, <span class="ruby-identifier">:both_sides</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
251:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version_condition_met?</span> <span class="ruby-comment cmt"># :nodoc:</span>
252:             <span class="ruby-identifier">base</span>.<span class="ruby-identifier">version_condition_met?</span>
253:           <span class="ruby-keyword kw">end</span>
254:         <span class="ruby-keyword kw">end</span>
255:       <span class="ruby-keyword kw">end</span>
256: 
257:       <span class="ruby-comment cmt"># Modify main class</span>
258:       <span class="ruby-identifier">class_eval</span> <span class="ruby-keyword kw">do</span>
259:         <span class="ruby-identifier">has_many</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:relationship_name</span>],
260:           <span class="ruby-identifier">:class_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:class_name</span>],
261:           <span class="ruby-identifier">:table_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:table_name</span>],
262:           <span class="ruby-identifier">:foreign_key</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:foreign_key</span>],
263:           <span class="ruby-identifier">:dependent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:destroy</span>
264: 
265:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:versioned</span>]
266:           <span class="ruby-keyword kw">begin</span>
267:             <span class="ruby-identifier">version_column</span> = <span class="ruby-identifier">column_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'lock_version'</span>) <span class="ruby-operator">?</span>
268:               <span class="ruby-value str">'lock_version'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'version'</span>
269:             <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version</span> <span class="ruby-comment cmt"># :nodoc:</span>
270:               <span class="ruby-identifier">lock_version</span>
271:             <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">version_column</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'lock_version'</span>
272:           <span class="ruby-keyword kw">rescue</span>
273:             <span class="ruby-identifier">version_column</span> = <span class="ruby-value str">'version'</span>
274:           <span class="ruby-keyword kw">end</span>
275:           <span class="ruby-identifier">acts_as_versioned</span> <span class="ruby-identifier">:version_column</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">version_column</span>
276:           <span class="ruby-identifier">acts_as_versioned_association</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:relationship_name</span>],
277:             <span class="ruby-identifier">:both_sides</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
278:           <span class="ruby-identifier">version_class</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:include</span>,
279:             <span class="ruby-constant">FlexAttributes</span><span class="ruby-operator">::</span><span class="ruby-constant">InstanceMethods</span>
280:         <span class="ruby-keyword kw">end</span>
281: 
282:         <span class="ruby-comment cmt"># The following is only setup once</span>
283:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">private_method_defined?</span> <span class="ruby-identifier">:method_missing_without_flex_attributes</span>
284: 
285:           <span class="ruby-comment cmt"># Carry out delayed actions before save</span>
286:           <span class="ruby-identifier">after_validation_on_update</span> <span class="ruby-identifier">:save_modified_flex_attributes</span>
287: 
288:           <span class="ruby-comment cmt"># Make attributes seem real</span>
289:           <span class="ruby-identifier">alias_method</span> <span class="ruby-identifier">:method_missing_without_flex_attributes</span>, <span class="ruby-identifier">:method_missing</span>
290:           <span class="ruby-identifier">alias_method</span> <span class="ruby-identifier">:method_missing</span>, <span class="ruby-identifier">:method_missing_with_flex_attributes</span>
291: 
292:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:versioned</span>]
293:             <span class="ruby-identifier">version_class_alias_method</span> <span class="ruby-identifier">:method_missing_without_flex_attributes</span>, <span class="ruby-identifier">:method_missing</span>
294:             <span class="ruby-identifier">version_class_alias_method</span> <span class="ruby-identifier">:method_missing</span>, <span class="ruby-identifier">:method_missing_with_flex_attributes</span>
295:           <span class="ruby-keyword kw">end</span>
296: 
297:           <span class="ruby-identifier">private</span>
298: 
299:           <span class="ruby-identifier">alias_method</span> <span class="ruby-identifier">:read_attribute_without_flex_attributes</span>, <span class="ruby-identifier">:read_attribute</span>
300:           <span class="ruby-identifier">alias_method</span> <span class="ruby-identifier">:read_attribute</span>, <span class="ruby-identifier">:read_attribute_with_flex_attributes</span>
301:           <span class="ruby-identifier">alias_method</span> <span class="ruby-identifier">:write_attribute_without_flex_attributes</span>, <span class="ruby-identifier">:write_attribute</span>
302:           <span class="ruby-identifier">alias_method</span> <span class="ruby-identifier">:write_attribute</span>, <span class="ruby-identifier">:write_attribute_with_flex_attributes</span>
303: 
304:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:versioned</span>]
305:             <span class="ruby-identifier">version_class_alias_method</span> <span class="ruby-identifier">:read_attribute_without_flex_attributes</span>, <span class="ruby-identifier">:read_attribute</span>
306:             <span class="ruby-identifier">version_class_alias_method</span> <span class="ruby-identifier">:read_attribute</span>, <span class="ruby-identifier">:read_attribute_with_flex_attributes</span>
307:             <span class="ruby-identifier">version_class_alias_method</span> <span class="ruby-identifier">:write_attribute_without_flex_attributes</span>, <span class="ruby-identifier">:write_attribute</span>
308:             <span class="ruby-identifier">version_class_alias_method</span> <span class="ruby-identifier">:write_attribute</span>, <span class="ruby-identifier">:write_attribute_with_flex_attributes</span>
309:           <span class="ruby-keyword kw">end</span>
310:         <span class="ruby-keyword kw">end</span>
311:       <span class="ruby-keyword kw">end</span>
312:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>