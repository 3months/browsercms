<% content_for :html_head do %>
<script type="text/javascript">
jQuery(function($){
  var cms_access_group_ids = <%= GroupType.cms_access.all.map{|e| e.id.to_s}.to_json %>
  $('#group_group_type_id').change(function() {
    if ($.inArray($('#group_group_type_id')[0].value, cms_access_group_ids)) {
      $('#permissions').hide()
    } else {
      $('#permissions').show()
    }
  }).change()
});
</script>
<% end %>

<table id="permissions">
  <tr>
    <th colspan="3">
      What kind of tasks should group members be allowed to do?
      <%= hidden_field_tag "group[permission_ids][]", "" %>  
    </th>
	</tr>	
	<tr>
	  <td>&nbsp;</td>
		<td>Permission</td>
		<td>Description</td>
	</tr>
	<% Permission.all(:order => "name").each do |p|%><tr>
		<td><%= check_box_tag "group[permission_ids][]", p.id, @group.permissions.include?(p), :id => "permission_ids_#{p.id}", :class => "permission_ids" %></td>
		<td><%=h p.full_name %></td>
		<td><%=h p.description %></td>
	</tr><% end %>
	<tr>
		<td colspan="3">
		  <%= link_to_check_all 'input.permission_ids' %>
		  <%= link_to_uncheck_all 'input.permission_ids' %>
		</td>
	</tr>
</table>